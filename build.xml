<?xml version="1.0"?>
<!-- ====================================================================== 
     ant build file
     ====================================================================== -->
<project name="PhenoscapeBuilder" default="build-all" basedir=".">
	<description>Phenoscape build for data loading, reasoning, and indexing</description>
	<tstamp>
		<format property="NOW" pattern="yyyy-MM-dd_HH:mm:ss" />
	</tstamp>
	<path id="project.classpath">
		<fileset dir="lib">
			<include name="*" />
		</fileset>
	</path>
	<taskdef name="urlencode" classname="net.sf.antcontrib.property.URLEncodeTask">
		<classpath>
			<pathelement location="lib/ant-contrib-1.0b3.jar" />
		</classpath>
	</taskdef>
	<taskdef name="if" classname="net.sf.antcontrib.logic.IfTask">
		<classpath>
			<pathelement location="lib/ant-contrib-1.0b3.jar" />
		</classpath>
	</taskdef>
	<taskdef name="for" classname="net.sf.antcontrib.logic.ForTask">
		<classpath>
			<pathelement location="lib/ant-contrib-1.0b3.jar" />
		</classpath>
	</taskdef>
	<taskdef name="checkimports" classname="org.phenoscape.owl.CheckImportsTask">
		<classpath refid="project.classpath" />
	</taskdef>
	<property name="atsign" value="@" />
	<property name="build_date" value="${NOW}" />
	<property name="avoid.downloads" value="true" />
	<property name="staging" value="staging" />
	<property name="nexml" value="${staging}/nexml" />
	<property name="nexml-repo" value="https://github.com/phenoscape/phenoscape-data/trunk/Curation Files" />
	<property name="ontology.downloads" value="${staging}/downloads/ontologies" />
	<property name="zfin.downloads" value="${staging}/downloads/zfin" />
	<property name="mgi.downloads" value="${staging}/downloads/mgi" />
	<property name="human.downloads" value="${staging}/downloads/human" />
	<property name="xenbase.downloads" value="${staging}/downloads/xenbase" />
	<property name="kb" value="${staging}/kb/kb" />
	<property name="kb-closure" value="${staging}/kb/closure" />
	<property name="ro" value="http://purl.obolibrary.org/obo/ro.owl" />
	<property name="iao-metadata" value="http://purl.obolibrary.org/obo/iao/ontology-metadata.owl" />
	<property name="uberon-references" value="http://purl.obolibrary.org/obo/uberon/references/references.owl" />
	<property name="tao" value="http://purl.obolibrary.org/obo/tao.owl" />
	<property name="go" value="http://purl.obolibrary.org/obo/go.owl" />
	<property name="pato" value="http://purl.obolibrary.org/obo/pato.owl" />
	<property name="bspo" value="http://purl.obolibrary.org/obo/bspo.owl" />
	<property name="vto" value="http://purl.obolibrary.org/obo/vto.owl" />
	<property name="uberon-merged" value="http://purl.obolibrary.org/obo/uberon/merged.owl" />
	<property name="phenoscape-ext" value="http://purl.obolibrary.org/obo/uberon/phenoscape-ext.owl" />
	<property name="zfa" value="http://purl.obolibrary.org/obo/zfa.owl" />
	<property name="zfa-bridge" value="http://purl.obolibrary.org/obo/uberon/bridge/uberon-ext-bridge-to-zfa.owl" />
	<property name="xao" value="http://purl.obolibrary.org/obo/xao.owl" />
	<property name="xao-bridge" value="http://purl.obolibrary.org/obo/uberon/bridge/uberon-bridge-to-xao.owl" />
	<property name="phenoscape-tbox" value="http://purl.obolibrary.org/obo/phenoscape/tbox.owl" />
	<property name="hp" value="http://purl.obolibrary.org/obo/hp.owl" />
	<property name="hp-equivalence-axioms" value="http://purl.obolibrary.org/obo/hp/hp-equivalence-axioms.obo" />
	<property name="hp-logical-definitions" value="http://purl.obolibrary.org/obo/hp/hp-logical-definitions.owl" />
	<property name="fma-bridge" value="http://purl.obolibrary.org/obo/uberon/bridge/uberon-bridge-to-fma.owl" />

	<property name="human-phenotypes" value="http://purl.obolibrary.org/obo/phenoscape/human_phenotypes.owl" />
	<urlencode property="human-phenotypes.encoded" value="${human-phenotypes}" />
	<property name="mgi-expression" value="http://purl.obolibrary.org/obo/phenoscape/mgi_gene_expression.owl" />
	<urlencode property="mgi-expression.encoded" value="${mgi-expression}" />
	<property name="mgi-genes" value="http://purl.obolibrary.org/obo/phenoscape/mgi_genes.owl" />
	<urlencode property="mgi-genes.encoded" value="${mgi-genes}" />
	<property name="mgi-phenotypes" value="http://purl.obolibrary.org/obo/phenoscape/mgi_phenotypes.owl" />
	<urlencode property="mgi-phenotypes.encoded" value="${mgi-phenotypes}" />
	<property name="zfin-expression" value="http://purl.obolibrary.org/obo/phenoscape/zfin_gene_expression.owl" />
	<urlencode property="zfin-expression.encoded" value="${zfin-expression}" />
	<property name="zfin-genes" value="http://purl.obolibrary.org/obo/phenoscape/zfin_genes.owl" />
	<urlencode property="zfin-genes.encoded" value="${zfin-genes}" />
	<property name="zfin-phenotypes" value="http://purl.obolibrary.org/obo/phenoscape/zfin_phenotypes.owl" />
	<urlencode property="zfin-phenotypes.encoded" value="${zfin-phenotypes}" />
	<property name="zfin-previous-names" value="http://purl.obolibrary.org/obo/phenoscape/zfin_previous_gene_names.owl" />
	<urlencode property="zfin-previous-names.encoded" value="${zfin-previous-names}" />
	<property name="xenbase-expression" value="http://purl.obolibrary.org/obo/phenoscape/xenbase_gene_expression.owl" />
	<urlencode property="xenbase-expression.encoded" value="${xenbase-expression}" />
	<property name="xenbase-genes" value="http://purl.obolibrary.org/obo/phenoscape/xenbase_genes.owl" />
	<urlencode property="xenbase-genes.encoded" value="${xenbase-genes}" />


	<urlencode property="ro.encoded" value="${ro}" />
	<urlencode property="iao-metadata.encoded" value="${iao-metadata}" />
	<urlencode property="uberon-references.encoded" value="${uberon-references}" />
	<urlencode property="go.encoded" value="${go}" />
	<urlencode property="pato.encoded" value="${pato}" />
	<urlencode property="bspo.encoded" value="${bspo}" />
	<urlencode property="vto.encoded" value="${vto}" />
	<urlencode property="uberon-merged.encoded" value="${uberon-merged}" />
	<urlencode property="phenoscape-ext.encoded" value="${phenoscape-ext}" />
	<urlencode property="zfa.encoded" value="${zfa}" />
	<urlencode property="zfa-bridge.encoded" value="${zfa-bridge}" />
	<urlencode property="xao.encoded" value="${xao}" />
	<urlencode property="xao-bridge.encoded" value="${xao-bridge}" />
	<urlencode property="phenoscape-tbox.encoded" value="${phenoscape-tbox}" />
	<urlencode property="hp.encoded" value="${hp}" />
	<urlencode property="hp-equivalence-axioms.encoded" value="${hp-equivalence-axioms}" />
	<urlencode property="hp-logical-definitions.encoded" value="${hp-logical-definitions}" />
	<urlencode property="fma-bridge.encoded" value="${fma-bridge}" />
	<urlencode property="partof.uberon-merged.encoded" value="http://purl.obolibrary.org/obo/BFO_0000050_some_http://purl.obolibrary.org/obo/uberon/merged.owl" />
	<urlencode property="haspart.uberon-merged.encoded" value="http://purl.obolibrary.org/obo/BFO_0000051_some_http://purl.obolibrary.org/obo/uberon/merged.owl" />
	<urlencode property="involves.uberon-merged.encoded" value="http://vocab.phenoscape.org/involves_some_http://purl.obolibrary.org/obo/uberon/merged.owl" />
	<urlencode property="partof.phenoscape-ext.encoded" value="http://purl.obolibrary.org/obo/BFO_0000050_some_http://purl.obolibrary.org/obo/uberon/phenoscape-ext.owl" />
	<urlencode property="haspart.phenoscape-ext.encoded" value="http://purl.obolibrary.org/obo/BFO_0000051_some_http://purl.obolibrary.org/obo/uberon/phenoscape-ext.owl" />
	<urlencode property="involves.phenoscape-ext.encoded" value="http://vocab.phenoscape.org/involves_some_http://purl.obolibrary.org/obo/uberon/phenoscape-ext.owl" />
	<urlencode property="partof.go.encoded" value="http://purl.obolibrary.org/obo/BFO_0000050_some_http://purl.obolibrary.org/obo/go.owl" />
	<urlencode property="haspart.go.encoded" value="http://purl.obolibrary.org/obo/BFO_0000051_some_http://purl.obolibrary.org/obo/go.owl" />
	<urlencode property="involves.go.encoded" value="http://vocab.phenoscape.org/involves_some_http://purl.obolibrary.org/obo/go.owl" />
	<urlencode property="bearerof.pato.encoded" value="http://purl.obolibrary.org/obo/BFO_0000053_some_http://purl.obolibrary.org/obo/pato.owl" />
	<urlencode property="involves.pato.encoded" value="http://vocab.phenoscape.org/involves_some_http://purl.obolibrary.org/obo/pato.owl" />
	<urlencode property="absent.phenoscape-ext.encoded" value="http://phenoscape.org/not_has_part/http://purl.obolibrary.org/obo/uberon/phenoscape-ext.owl" />
	<urlencode property="absent.uberon-merged.encoded" value="http://phenoscape.org/not_has_part/http://purl.obolibrary.org/obo/uberon/merged.owl" />
	<urlencode property="absent.go.encoded" value="http://phenoscape.org/not_has_part/http://purl.obolibrary.org/obo/go.owl" />
	<urlencode property="developsfrom.phenoscape-ext.encoded" value="http://purl.obolibrary.org/obo/uberon/phenoscape-ext.owl/reverse_develops_from_rules.owl" />
	<urlencode property="developsfrom.uberon-merged.encoded" value="http://purl.obolibrary.org/obo/uberon/merged.owl/reverse_develops_from_rules.owl" />
	<urlencode property="partof.zfa.encoded" value="http://purl.obolibrary.org/obo/BFO_0000050_some_http://purl.obolibrary.org/obo/zfa.owl" />
	<urlencode property="haspart.zfa.encoded" value="http://purl.obolibrary.org/obo/BFO_0000051_some_http://purl.obolibrary.org/obo/zfa.owl" />
	<urlencode property="involves.zfa.encoded" value="http://vocab.phenoscape.org/involves_some_http://purl.obolibrary.org/obo/zfa.owl" />
	<urlencode property="developsfrom.zfa.encoded" value="http://purl.obolibrary.org/obo/zfa.owl/reverse_develops_from_rules.owl" />
	<urlencode property="absent.zfa.encoded" value="http://phenoscape.org/not_has_part/http://purl.obolibrary.org/obo/zfa.owl" />
	<urlencode property="partof.xao.encoded" value="http://purl.obolibrary.org/obo/BFO_0000050_some_http://purl.obolibrary.org/obo/xao.owl" />
	<urlencode property="haspart.xao.encoded" value="http://purl.obolibrary.org/obo/BFO_0000051_some_http://purl.obolibrary.org/obo/xao.owl" />
	<urlencode property="involves.xao.encoded" value="http://vocab.phenoscape.org/involves_some_http://purl.obolibrary.org/obo/xao.owl" />
	<urlencode property="developsfrom.xao.encoded" value="http://purl.obolibrary.org/obo/xao.owl/reverse_develops_from_rules.owl" />
	<urlencode property="absent.xao.encoded" value="http://phenoscape.org/not_has_part/http://purl.obolibrary.org/obo/xao.owl" />
	<urlencode property="involves.hp.encoded" value="http://vocab.phenoscape.org/involves_some_http://purl.obolibrary.org/obo/hp.owl" />
	<urlencode property="individuals.vto.encoded" value="http://phenoscape.org/individuals/${vto}" />

	<path id="jarsclasspath">
		<fileset dir="lib">
			<include name="*" />
		</fileset>
	</path>

	<!-- The init target makes sure that the prerequisite directories exist. -->
	<target name="init">
		<mkdir dir="${staging}" />
		<mkdir dir="${ontology.downloads}" />
		<mkdir dir="${zfin.downloads}" />
		<mkdir dir="${mgi.downloads}" />
		<mkdir dir="${human.downloads}" />
		<mkdir dir="${xenbase.downloads}" />
		<mkdir dir="${kb}" />
	</target>

	<target name="download-iao-metadata" depends="init">
		<if>
			<available file="${ontology.downloads}/${iao-metadata.encoded}" />
			<then>
				<checksum file="${ontology.downloads}/${iao-metadata.encoded}" property="iao-metadata.checksum" />
			</then>
			<else>
				<property name="iao-metadata.checksum" value="0" />
			</else>
		</if>
		<get src="http://purl.obolibrary.org/obo/iao/ontology-metadata.owl" dest="${ontology.downloads}/${iao-metadata.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<checksum file="${ontology.downloads}/${iao-metadata.encoded}" property="${iao-metadata.checksum}" verifyproperty="iao-metadata.matches" />
		<condition property="${iao-metadata}.modified">
			<isfalse value="${iao-metadata.matches}" />
		</condition>
		<copy file="${ontology.downloads}/${iao-metadata.encoded}" tofile="${kb}/${iao-metadata.encoded}" preservelastmodified="true" />
	</target>

	<target name="download-uberon-references" depends="init">
		<if>
			<available file="${ontology.downloads}/${uberon-references.encoded}" />
			<then>
				<checksum file="${ontology.downloads}/${uberon-references.encoded}" property="uberon-references.checksum" />
			</then>
			<else>
				<property name="uberon-references.checksum" value="0" />
			</else>
		</if>
		<get src="http://purl.obolibrary.org/obo/uberon/references/references.owl" dest="${ontology.downloads}/${uberon-references.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<checksum file="${ontology.downloads}/${uberon-references.encoded}" property="${uberon-references.checksum}" verifyproperty="uberon-references.matches" />
		<condition property="${uberon-references}.modified">
			<isfalse value="${uberon-references.matches}" />
		</condition>
		<copy file="${ontology.downloads}/${uberon-references.encoded}" tofile="${kb}/${uberon-references.encoded}" preservelastmodified="true" />
	</target>

	<target name="download-uberon-merged" depends="init">
		<if>
			<available file="${ontology.downloads}/${uberon-merged.encoded}" />
			<then>
				<checksum file="${ontology.downloads}/${uberon-merged.encoded}" property="uberon-merged.checksum" />
			</then>
			<else>
				<property name="uberon-merged.checksum" value="0" />
			</else>
		</if>
		<get src="http://purl.obolibrary.org/obo/uberon/merged.owl" dest="${ontology.downloads}/${uberon-merged.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<checksum file="${ontology.downloads}/${uberon-merged.encoded}" property="${uberon-merged.checksum}" verifyproperty="uberon-merged.matches" />
		<condition property="${uberon-merged}.modified">
			<isfalse value="${uberon-merged.matches}" />
		</condition>
	</target>

	<target name="download-phenoscape-ext" depends="init">
		<if>
			<available file="${ontology.downloads}/${phenoscape-ext.encoded}" />
			<then>
				<checksum file="${ontology.downloads}/${phenoscape-ext.encoded}" property="phenoscape-ext.checksum" />
			</then>
			<else>
				<property name="phenoscape-ext.checksum" value="0" />
			</else>
		</if>
		<get src="http://phenoscape.svn.sourceforge.net/svnroot/phenoscape/trunk/vocab/edit/phenoscape-ext.owl" dest="${ontology.downloads}/${phenoscape-ext.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<checksum file="${ontology.downloads}/${phenoscape-ext.encoded}" property="${phenoscape-ext.checksum}" verifyproperty="phenoscape-ext.matches" />
		<condition property="${phenoscape-ext}.modified">
			<isfalse value="${phenoscape-ext.matches}" />
		</condition>
	</target>

	<target name="download-go" depends="init">
		<if>
			<available file="${ontology.downloads}/${go.encoded}" />
			<then>
				<checksum file="${ontology.downloads}/${go.encoded}" property="go.checksum" />
			</then>
			<else>
				<property name="go.checksum" value="0" />
			</else>
		</if>
		<get src="http://purl.obolibrary.org/obo/go.owl" dest="${ontology.downloads}/${go.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<checksum file="${ontology.downloads}/${go.encoded}" property="${go.checksum}" verifyproperty="go.matches" />
		<condition property="${go}.modified">
			<isfalse value="${go.matches}" />
		</condition>
	</target>

	<target name="download-zfa" depends="init">
		<get src="http://purl.obolibrary.org/obo/zfa.owl" dest="${ontology.downloads}/${zfa.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<get src="http://purl.obolibrary.org/obo/uberon/bridge/uberon-ext-bridge-to-zfa.owl" dest="${ontology.downloads}/${zfa-bridge.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
	</target>

	<target name="download-xao" depends="init">
		<get src="http://purl.obolibrary.org/obo/xao.owl" dest="${ontology.downloads}/${xao.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<get src="http://purl.obolibrary.org/obo/uberon/bridge/uberon-bridge-to-xao.owl" dest="${ontology.downloads}/${xao-bridge.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
	</target>

	<target name="download-hpo" depends="init">
		<get src="http://purl.obolibrary.org/obo/hp.owl" dest="${ontology.downloads}/${hp.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<get src="http://purl.obolibrary.org/obo/hp/hp-equivalence-axioms.obo" dest="${ontology.downloads}/${hp-equivalence-axioms.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<get src="http://purl.obolibrary.org/obo/uberon/bridge/uberon-bridge-to-fma.owl" dest="${ontology.downloads}/${fma-bridge.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
	</target>

	<target name="normalize-hpo" depends="download-hpo">
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${ontology.downloads}/${hp.encoded}" />
			<arg value="${kb}/${hp.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
		<java classname="org.obolibrary.cli.OBORunner" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="--allow-dangling" />
			<arg value="${ontology.downloads}/${hp-equivalence-axioms.encoded}" />
			<arg value="-o" />
			<arg value="${kb}/${hp-logical-definitions.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="entityExpansionLimit" value="9999999" />
		</java>
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${hp-logical-definitions.encoded}" />
			<arg value="${kb}/${hp-logical-definitions.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${ontology.downloads}/${fma-bridge.encoded}" />
			<arg value="${kb}/${fma-bridge.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-involves-hpo" depends="normalize-hpo">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${hp.encoded}" />
			<arg value="http://vocab.phenoscape.org/involves" />
			<arg value="${kb}/${involves.hp.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="download-pato" depends="init">
		<if>
			<available file="${ontology.downloads}/${pato.encoded}" />
			<then>
				<checksum file="${ontology.downloads}/${pato.encoded}" property="pato.checksum" />
			</then>
			<else>
				<property name="pato.checksum" value="0" />
			</else>
		</if>
		<get src="http://purl.obolibrary.org/obo/pato.owl" dest="${ontology.downloads}/${pato.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<checksum file="${ontology.downloads}/${pato.encoded}" property="${pato.checksum}" verifyproperty="pato.matches" />
		<condition property="${pato}.modified">
			<isfalse value="${pato.matches}" />
		</condition>
	</target>

	<target name="download-bspo" depends="init">
		<if>
			<available file="${ontology.downloads}/${bspo.encoded}" />
			<then>
				<checksum file="${ontology.downloads}/${bspo.encoded}" property="bspo.checksum" />
			</then>
			<else>
				<property name="bspo.checksum" value="0" />
			</else>
		</if>
		<get src="http://purl.obolibrary.org/obo/bspo.owl" dest="${ontology.downloads}/${bspo.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<checksum file="${ontology.downloads}/${bspo.encoded}" property="${bspo.checksum}" verifyproperty="bspo.matches" />
		<condition property="${bspo}.modified">
			<isfalse value="${bspo.matches}" />
		</condition>
	</target>

	<target name="download-vto" depends="init">
		<if>
			<available file="${ontology.downloads}/${vto.encoded}" />
			<then>
				<checksum file="${ontology.downloads}/${vto.encoded}" property="vto.checksum" />
			</then>
			<else>
				<property name="vto.checksum" value="0" />
			</else>
		</if>
		<get src="http://purl.obolibrary.org/obo/vto.owl" dest="${ontology.downloads}/${vto.encoded}" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<checksum file="${ontology.downloads}/${vto.encoded}" property="${vto.checksum}" verifyproperty="vto.matches" />
		<condition property="${vto}.modified">
			<isfalse value="${vto.matches}" />
		</condition>
	</target>

	<target name="download-ontologies" depends="init,download-iao-metadata,download-uberon-references,download-uberon-merged,download-phenoscape-ext,download-go,download-pato,download-bspo,download-vto,download-zfa,download-xao">
		<copy file="ontologies/ro-slim.owl" tofile="${kb}/${ro.encoded}" preservelastmodified="true" />
		<!--	<copy file="ontologies/phenoscape-tbox.owl" tofile="${kb}/${phenoscape-tbox.encoded}" preservelastmodified="true" /> -->
		<copy file="ontologies/phenoscape-tbox-fewer-classes.owl" tofile="${kb}/${phenoscape-tbox.encoded}" preservelastmodified="true" />
	</target>

	<target name="normalize-vto" depends="download-ontologies">
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${ontology.downloads}/${vto.encoded}" />
			<arg value="${kb}/${vto.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="entityExpansionLimit" value="9999999" />
		</java>
	</target>

	<target name="normalize-uberon-merged" depends="download-ontologies,normalize-pato,normalize-bspo">
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${ontology.downloads}/${uberon-merged.encoded}" />
			<arg value="${kb}/${uberon-merged.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="normalize-phenoscape-ext" depends="download-ontologies,normalize-pato,normalize-bspo,normalize-uberon-merged">
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${ontology.downloads}/${phenoscape-ext.encoded}" />
			<arg value="${kb}/${phenoscape-ext.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="normalize-zfa" depends="download-ontologies">
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${ontology.downloads}/${zfa.encoded}" />
			<arg value="${kb}/${zfa.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="normalize-zfa-bridge" depends="download-ontologies">
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${ontology.downloads}/${zfa-bridge.encoded}" />
			<arg value="${kb}/${zfa-bridge.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="normalize-xao" depends="download-ontologies">
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${ontology.downloads}/${xao.encoded}" />
			<arg value="${kb}/${xao.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="normalize-xao-bridge" depends="download-ontologies">
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${ontology.downloads}/${xao-bridge.encoded}" />
			<arg value="${kb}/${xao-bridge.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="materialize-phenoscape-tbox" depends="normalize-uberon-merged,normalize-phenoscape-ext,normalize-pato,normalize-bspo,
		normalize-go,normalize-zfa,normalize-zfa-bridge,normalize-xao,normalize-xao-bridge,normalize-hpo,generate-partof-uberon-merged,
		generate-partof-go,
		generate-haspart-uberon-merged,generate-haspart-go,generate-absent-uberon-merged,generate-uberon-merged-develops-from-rules,
		generate-partof-phenoscape-ext,generate-haspart-phenoscape-ext,generate-absent-phenoscape-ext,
		generate-phenoscape-ext-develops-from-rules,generate-bearerof-pato,generate-absent-go,generate-involves-uberon-merged,
		generate-involves-phenoscape-ext,generate-involves-go,generate-involves-pato,generate-partof-zfa,generate-haspart-zfa,
		generate-involves-zfa,generate-absent-zfa,generate-zfa-develops-from-rules,generate-partof-xao,generate-haspart-xao,
		generate-involves-xao,generate-absent-xao,generate-xao-develops-from-rules,generate-involves-hpo">
		<java classname="org.phenoscape.owl.MaterializeInferences" classpathref="jarsclasspath" fork="true" maxmemory="12g" failonerror="true">
			<arg value="${kb}/${phenoscape-tbox.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="org.phenoscape.owl.reasoner" value="elk" />
			<sysproperty key="log4j.configuration" value="log4j.properties" />
		</java>
	</target>

	<target name="assert-negation-hierarchy-phenoscape-tbox" depends="materialize-phenoscape-tbox">
		<java classname="org.phenoscape.owl.NegationHierarchyAsserter" classpathref="jarsclasspath" fork="true" maxmemory="8g" failonerror="true">
			<arg value="${kb}/${phenoscape-tbox.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
	</target>

	<target name="normalize-go" depends="download-ontologies">
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${ontology.downloads}/${go.encoded}" />
			<arg value="${kb}/${go.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="normalize-pato" depends="download-ontologies">
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${ontology.downloads}/${pato.encoded}" />
			<arg value="${kb}/${pato.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="normalize-bspo" depends="download-ontologies">
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${ontology.downloads}/${bspo.encoded}" />
			<arg value="${kb}/${bspo.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-individuals-vto" depends="normalize-vto">
		<java classname="org.phenoscape.owl.TaxonomyConverter" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${vto.encoded}" />
			<arg value="${kb}/${individuals.vto.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="entityExpansionLimit" value="9999999" />
		</java>
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${individuals.vto.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="materialize-individuals-vto" depends="generate-individuals-vto">
		<java classname="org.phenoscape.owl.MaterializeInferences" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${individuals.vto.encoded}" />
			<arg value="${kb-closure}/materialized_${individuals.vto.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="entityExpansionLimit" value="9999999" />
			<sysproperty key="org.phenoscape.owl.reasoner" value="trowl" />
		</java>
	</target>

	<target name="generate-partof-uberon-merged" depends="normalize-uberon-merged">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${uberon-merged.encoded}" />
			<arg value="http://purl.obolibrary.org/obo/BFO_0000050" />
			<arg value="${kb}/${partof.uberon-merged.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-involves-uberon-merged" depends="normalize-uberon-merged">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${uberon-merged.encoded}" />
			<arg value="http://vocab.phenoscape.org/involves" />
			<arg value="${kb}/${involves.uberon-merged.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-haspart-uberon-merged" depends="normalize-uberon-merged">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${uberon-merged.encoded}" />
			<arg value="http://purl.obolibrary.org/obo/BFO_0000051" />
			<arg value="${kb}/${haspart.uberon-merged.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-partof-phenoscape-ext" depends="normalize-phenoscape-ext">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${phenoscape-ext.encoded}" />
			<arg value="http://purl.obolibrary.org/obo/BFO_0000050" />
			<arg value="${kb}/${partof.phenoscape-ext.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-haspart-phenoscape-ext" depends="normalize-phenoscape-ext">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${phenoscape-ext.encoded}" />
			<arg value="http://purl.obolibrary.org/obo/BFO_0000051" />
			<arg value="${kb}/${haspart.phenoscape-ext.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-involves-phenoscape-ext" depends="normalize-phenoscape-ext">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${phenoscape-ext.encoded}" />
			<arg value="http://vocab.phenoscape.org/involves" />
			<arg value="${kb}/${involves.phenoscape-ext.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-partof-go" depends="normalize-go">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${go.encoded}" />
			<arg value="http://purl.obolibrary.org/obo/BFO_0000050" />
			<arg value="${kb}/${partof.go.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-haspart-go" depends="normalize-go">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${go.encoded}" />
			<arg value="http://purl.obolibrary.org/obo/BFO_0000051" />
			<arg value="${kb}/${haspart.go.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-involves-go" depends="normalize-go">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${go.encoded}" />
			<arg value="http://vocab.phenoscape.org/involves" />
			<arg value="${kb}/${involves.go.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-bearerof-pato" depends="normalize-pato">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${pato.encoded}" />
			<arg value="http://purl.obolibrary.org/obo/BFO_0000053" />
			<arg value="${kb}/${bearerof.pato.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-involves-pato" depends="normalize-pato">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${pato.encoded}" />
			<arg value="http://vocab.phenoscape.org/involves" />
			<arg value="${kb}/${involves.pato.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-partof-zfa" depends="normalize-zfa">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${zfa.encoded}" />
			<arg value="http://purl.obolibrary.org/obo/BFO_0000050" />
			<arg value="${kb}/${partof.zfa.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-involves-zfa" depends="normalize-zfa">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${zfa.encoded}" />
			<arg value="http://vocab.phenoscape.org/involves" />
			<arg value="${kb}/${involves.zfa.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-haspart-zfa" depends="normalize-zfa">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${zfa.encoded}" />
			<arg value="http://purl.obolibrary.org/obo/BFO_0000051" />
			<arg value="${kb}/${haspart.zfa.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-absent-zfa" depends="normalize-zfa">
		<java classname="org.phenoscape.owl.NegationClassGenerator" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${haspart.zfa.encoded}" />
			<arg value="${kb}/${absent.zfa.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
	</target>

	<target name="generate-partof-xao" depends="normalize-xao">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${xao.encoded}" />
			<arg value="http://purl.obolibrary.org/obo/BFO_0000050" />
			<arg value="${kb}/${partof.xao.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-involves-xao" depends="normalize-xao">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${xao.encoded}" />
			<arg value="http://vocab.phenoscape.org/involves" />
			<arg value="${kb}/${involves.xao.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-haspart-xao" depends="normalize-xao">
		<java classname="org.phenoscape.owl.NamedRestrictionGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${xao.encoded}" />
			<arg value="http://purl.obolibrary.org/obo/BFO_0000051" />
			<arg value="${kb}/${haspart.xao.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
	</target>

	<target name="generate-absent-xao" depends="normalize-xao">
		<java classname="org.phenoscape.owl.NegationClassGenerator" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${haspart.xao.encoded}" />
			<arg value="${kb}/${absent.xao.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
	</target>

	<target name="generate-xao-develops-from-rules" depends="generate-absent-xao">
		<java classname="org.phenoscape.owl.ReverseDevelopsFromRuleGenerator" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${xao.encoded}" />
			<arg value="${kb}/${developsfrom.xao.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
	</target>

	<target name="generate-absent-uberon-merged" depends="normalize-uberon-merged">
		<java classname="org.phenoscape.owl.NegationClassGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${haspart.uberon-merged.encoded}" />
			<arg value="${kb}/${absent.uberon-merged.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
	</target>

	<target name="generate-absent-phenoscape-ext" depends="normalize-phenoscape-ext">
		<java classname="org.phenoscape.owl.NegationClassGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${haspart.phenoscape-ext.encoded}" />
			<arg value="${kb}/${absent.phenoscape-ext.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
	</target>

	<target name="generate-absent-go" depends="normalize-go">
		<java classname="org.phenoscape.owl.NegationClassGenerator" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${go.encoded}" />
			<arg value="${kb}/${absent.go.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
	</target>

	<target name="generate-uberon-merged-develops-from-rules" depends="generate-absent-uberon-merged">
		<java classname="org.phenoscape.owl.ReverseDevelopsFromRuleGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${uberon-merged.encoded}" />
			<arg value="${kb}/${developsfrom.uberon-merged.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
	</target>

	<target name="generate-phenoscape-ext-develops-from-rules" depends="generate-absent-phenoscape-ext">
		<java classname="org.phenoscape.owl.ReverseDevelopsFromRuleGenerator" classpathref="jarsclasspath" fork="true" maxmemory="2048m" failonerror="true">
			<arg value="${kb}/${phenoscape-ext.encoded}" />
			<arg value="${kb}/${developsfrom.phenoscape-ext.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
	</target>

	<target name="generate-zfa-develops-from-rules" depends="generate-absent-zfa">
		<java classname="org.phenoscape.owl.ReverseDevelopsFromRuleGenerator" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${zfa.encoded}" />
			<arg value="${kb}/${developsfrom.zfa.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
	</target>

	<target name="materialize-class-hierarchy-closure">
		<java classname="org.phenoscape.owl.MaterializeSubClassOfClosure" classpathref="jarsclasspath" fork="true" maxmemory="12g" failonerror="true">
			<arg value="${kb}/${phenoscape-tbox.encoded}" />
			<sysproperty key="org.phenoscape.owl.MaterializeSubClassOfClosure.target" value="${kb-closure}/hierarchy_closure.owl" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
	</target>

	<target name="checkout-nexml" depends="init" description="">
		<exec executable="svn" dir="${staging}" failonerror="true">
			<arg value="checkout" />
			<arg value="${nexml-repo}" />
			<arg value="nexml" />
		</exec>
	</target>

	<!-- depends="checkout-nexml" -->
	<target name="nexml-to-owl">
		<for param="file" parallel="true" threadCount="5">
			<path>
				<fileset dir="${nexml}/completed-phenex-files">
					<include name="**/*.xml" />
					<exclude name="**/catalog-v001.xml" />
				</fileset>
				<fileset dir="${nexml}/fin_limb-incomplete-files">
					<include name="**/*.xml" />
					<exclude name="**/catalog-v001.xml" />
				</fileset>
			</path>
			<sequential>
				<java classname="org.phenoscape.owl.PhenexToOWL" classpathref="jarsclasspath" fork="true" maxmemory="3g" failonerror="true">
					<arg value="@{file}" />
					<arg value="@{file}.owl" />
				</java>
				<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="3g" failonerror="true">
					<arg value="@{file}.owl" />
					<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
				</java>
				<java classname="org.phenoscape.owl.MaterializeInferences" classpathref="jarsclasspath" fork="true" maxmemory="6g" failonerror="true">
					<arg value="@{file}.owl" />
					<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
					<sysproperty key="org.phenoscape.owl.reasoner" value="trowl" />
					<sysproperty key="entityExpansionLimit" value="9999999" />
				</java>
				<copy file="@{file}.owl" todir="${kb}" preservelastmodified="true" />
			</sequential>
		</for>
	</target>

	<target name="load-bigdata">
		<for param="file" parallel="false">
			<path>
				<fileset dir="${kb}">
					<include name="*.owl" />
					<exclude name="**/catalog-v001.xml" />
				</fileset>
			</path>
			<sequential>
				<exec executable="curl" failonerror="true">
					<arg value="-X" />
					<arg value="POST" />
					<arg value="-d" />
					<arg value="${atsign}@{file}" />
					<arg value="--header" />
					<arg value="Content-Type:application/rdf+xml" />
					<arg value="http://localhost:8080/bigdata/sparql?context-uri=http://kb.phenoscape.org/" />
				</exec>
			</sequential>
		</for>
		<for param="file" parallel="false">
			<path>
				<fileset dir="${kb-closure}">
					<include name="*.owl" />
					<exclude name="**/catalog-v001.xml" />
				</fileset>
			</path>
			<sequential>
				<exec executable="curl" failonerror="true">
					<arg value="-X" />
					<arg value="POST" />
					<arg value="-d" />
					<arg value="${atsign}@{file}" />
					<arg value="--header" />
					<arg value="Content-Type:application/rdf+xml" />
					<arg value="http://localhost:8080/bigdata/sparql?context-uri=http://kb.phenoscape.org/closure" />
				</exec>
			</sequential>
		</for>
	</target>

	<target name="zfin-expression-to-owl" depends="init">
		<get src="http://zfin.org/downloads/wildtype-expression.txt" dest="${zfin.downloads}/zfin-expression.txt" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<java classname="org.phenoscape.owl.mod.zfin.ZFINExpressionToOWL" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${zfin.downloads}/zfin-expression.txt" />
			<arg value="${kb}/${zfin-expression.encoded}" />
		</java>
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${zfin-expression.encoded}" />
			<arg value="${kb}/${zfin-expression.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
		<java classname="org.phenoscape.owl.MaterializeInferences" classpathref="jarsclasspath" fork="true" maxmemory="12g" failonerror="true">
			<arg value="${kb}/${zfin-expression.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="org.phenoscape.owl.reasoner" value="elk" />
			<sysproperty key="log4j.configuration" value="log4j.properties" />
		</java>
	</target>

	<target name="zfin-phenotypes-to-owl" depends="init">
		<java classname="org.phenoscape.owl.mod.zfin.ZFINPhenotypesToOWL" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="ontologies/zfin-phenotypes-prelim.txt" />
			<arg value="${kb}/${zfin-phenotypes.encoded}" />
		</java>
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${zfin-phenotypes.encoded}" />
			<arg value="${kb}/${zfin-phenotypes.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
		<java classname="org.phenoscape.owl.MaterializeInferences" classpathref="jarsclasspath" fork="true" maxmemory="12g" failonerror="true">
			<arg value="${kb}/${zfin-phenotypes.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="org.phenoscape.owl.reasoner" value="elk" />
			<sysproperty key="log4j.configuration" value="log4j.properties" />
		</java>
	</target>

	<target name="zfin-genes-to-owl" depends="init">
		<get src="http://zfin.org/downloads/genetic_markers.txt" dest="${zfin.downloads}/zfin-genetic-markers.txt" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<java classname="org.phenoscape.owl.mod.zfin.ZFINGeneticMarkersToOWL" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${zfin.downloads}/zfin-genetic-markers.txt" />
			<arg value="${kb}/${zfin-genes.encoded}" />
		</java>
		<get src="http://zfin.org/downloads/aliases.txt" dest="${zfin.downloads}/zfin-aliases.txt" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<java classname="org.phenoscape.owl.mod.zfin.ZFINPreviousGeneNamesToOWL" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${zfin.downloads}/zfin-aliases.txt" />
			<arg value="${kb}/${zfin-previous-names.encoded}" />
		</java>
	</target>

	<target name="human-phenotypes-to-owl" depends="init">
		<get src="http://compbio.charite.de/hudson/job/hpo.annotations.monthly/lastStableBuild/artifact/annotation/genes_to_phenotype.txt" dest="${human.downloads}/human-phenotype-annotations.txt" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<java classname="org.phenoscape.owl.mod.human.HumanPhenotypesToOWL" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${human.downloads}/human-phenotype-annotations.txt" />
			<arg value="${kb}/${human-phenotypes.encoded}" />
		</java>
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${human-phenotypes.encoded}" />
			<arg value="${kb}/${human-phenotypes.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
		<java classname="org.phenoscape.owl.MaterializeInferences" classpathref="jarsclasspath" fork="true" maxmemory="12g" failonerror="true">
			<arg value="${kb}/${human-phenotypes.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="org.phenoscape.owl.reasoner" value="elk" />
			<sysproperty key="log4j.configuration" value="log4j.properties" />
		</java>
	</target>

	<target name="mgi-genes-to-owl" depends="init">
		<get src="ftp://ftp.informatics.jax.org/pub/reports/MRK_List2.rpt" dest="${mgi.downloads}/mgi-genetic-markers.txt" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<java classname="org.phenoscape.owl.mod.mgi.MGIGeneticMarkersToOWL" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${mgi.downloads}/mgi-genetic-markers.txt" />
			<arg value="${kb}/${mgi-genes.encoded}" />
		</java>
	</target>

	<target name="mgi-expression-to-owl" depends="init">
		<java classname="org.phenoscape.owl.mod.mgi.MGIExpressionToOWL" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="ontologies/GXD_limb_20130109.txt" />
			<arg value="${kb}/${mgi-expression.encoded}" />
		</java>
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${mgi-expression.encoded}" />
			<arg value="${kb}/${mgi-expression.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
		<java classname="org.phenoscape.owl.MaterializeInferences" classpathref="jarsclasspath" fork="true" maxmemory="12g" failonerror="true">
			<arg value="${kb}/${mgi-expression.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="org.phenoscape.owl.reasoner" value="elk" />
			<sysproperty key="log4j.configuration" value="log4j.properties" />
		</java>
	</target>

	<target name="mgi-phenotypes-to-owl" depends="init">
		<java classname="org.phenoscape.owl.mod.mgi.MGIPhenotypesToOWL" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="ontologies/MGI_pheno_limb.txt" />
			<arg value="${kb}/${mgi-phenotypes.encoded}" />
		</java>
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${mgi-phenotypes.encoded}" />
			<arg value="${kb}/${mgi-phenotypes.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
		</java>
		<java classname="org.phenoscape.owl.MaterializeInferences" classpathref="jarsclasspath" fork="true" maxmemory="12g" failonerror="true">
			<arg value="${kb}/${mgi-phenotypes.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="org.phenoscape.owl.reasoner" value="elk" />
			<sysproperty key="log4j.configuration" value="log4j.properties" />
		</java>
	</target>

	<target name="xenbase-genes-to-owl" depends="init">
		<get src="ftp://ftp.xenbase.org/pub/GenePageReports/GenePageGeneralInfo_ManuallyCurated.txt" dest="${xenbase.downloads}/xenbase-genes.txt" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<java classname="org.phenoscape.owl.mod.xenbase.XenbaseGenesToOWL" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${xenbase.downloads}/xenbase-genes.txt" />
			<arg value="${kb}/${xenbase-genes.encoded}" />
		</java>
	</target>

	<target name="xenbase-expression-to-owl" depends="init">
		<get src="ftp://ftp.xenbase.org/pub/GenePageReports/GeneExpression_laevis.txt" dest="${xenbase.downloads}/laevis-expression.txt" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<get src="ftp://ftp.xenbase.org/pub//GenePageReports/GeneExpression_tropicalis.txt" dest="${xenbase.downloads}/tropicalis-expression.txt" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<get src="ftp://ftp.xenbase.org/pub/GenePageReports/XenbaseGenepageToGeneIdMapping.txt" dest="${xenbase.downloads}/genepage-gene-mappings.txt" usetimestamp="true" skipexisting="${avoid.downloads}" />
		<java classname="org.phenoscape.owl.mod.xenbase.XenbaseExpressionToOWL" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${xenbase.downloads}/genepage-gene-mappings.txt" />
			<arg value="${xenbase.downloads}/laevis-expression.txt" />
			<arg value="${xenbase.downloads}/tropicalis-expression.txt" />
			<arg value="${kb}/${xenbase-expression.encoded}" />
		</java>
		<java classname="org.phenoscape.owl.PropertyNormalizer" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<arg value="${kb}/${xenbase-expression.encoded}" />
			<arg value="${kb}/${xenbase-expression.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
		</java>
		<java classname="org.phenoscape.owl.MaterializeInferences" classpathref="jarsclasspath" fork="true" maxmemory="12g" failonerror="true">
			<arg value="${kb}/${xenbase-expression.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="org.phenoscape.owl.reasoner" value="elk" />
			<sysproperty key="log4j.configuration" value="log4j.properties" />
		</java>
	</target>

	<target name="annotation-report">
		<fileset dir="${nexml}/fin_limb-incomplete-files" id="input_files">
			<include name="**/*.xml" />
			<exclude name="**/catalog-v001.xml" />
		</fileset>
		<pathconvert property="report.file.args" refid="input_files" pathsep="' '" />
		<java classname="org.phenoscape.owl.report.AnnotationReport" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<sysproperty key="entityExpansionLimit" value="9999999" />
			<sysproperty key="org.phenoscape.owl.report.AnnotationReport.ontology" value="ontologies/phenoscape-sources-merged.owl" />
			<sysproperty key="org.phenoscape.owl.report.AnnotationReport.output" value="report.txt" />
			<arg line="'${report.file.args}'" />
		</java>
	</target>

	<target name="annotation-status">
		<fileset dir="${nexml}/fin_limb-incomplete-files/Fish excluding tetrapodomorphs" id="fish_files">
			<include name="**/*.xml" />
			<exclude name="**/catalog-v001.xml" />
		</fileset>
		<pathconvert property="fish.report.file.args" refid="fish_files" pathsep="' '" />
		<echo>Fish excluding tetrapodomorphs</echo>
		<java classname="org.phenoscape.owl.report.AnnotationStatus" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<sysproperty key="entityExpansionLimit" value="9999999" />
			<arg line="'${fish.report.file.args}'" />
		</java>
		<fileset dir="${nexml}/fin_limb-incomplete-files/Amphibians and transitional" id="amphibian_files">
			<include name="**/*.xml" />
			<exclude name="**/catalog-v001.xml" />
		</fileset>
		<pathconvert property="amphibian.report.file.args" refid="amphibian_files" pathsep="' '" />
		<echo>Amphibians and transitional</echo>
		<java classname="org.phenoscape.owl.report.AnnotationStatus" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<sysproperty key="entityExpansionLimit" value="9999999" />
			<arg line="'${amphibian.report.file.args}'" />
		</java>
		<fileset dir="${nexml}/fin_limb-incomplete-files/Sereno Files" id="sereno_files">
			<include name="**/*.xml" />
			<exclude name="**/catalog-v001.xml" />
		</fileset>
		<pathconvert property="sereno.report.file.args" refid="sereno_files" pathsep="' '" />
		<echo>Sereno Files</echo>
		<java classname="org.phenoscape.owl.report.AnnotationStatus" classpathref="jarsclasspath" fork="true" maxmemory="4g" failonerror="true">
			<sysproperty key="entityExpansionLimit" value="9999999" />
			<arg line="'${sereno.report.file.args}'" />
		</java>
	</target>

	<target name="mod-data-to-owl" depends="zfin-genes-to-owl,zfin-expression-to-owl,zfin-phenotypes-to-owl,
		mgi-genes-to-owl,mgi-expression-to-owl,mgi-phenotypes-to-owl,xenbase-genes-to-owl,xenbase-expression-to-owl,
		human-phenotypes-to-owl" />

	<target name="build-all" description="" depends="download-ontologies,materialize-phenoscape-tbox,assert-negation-hierarchy-phenoscape-tbox,generate-individuals-vto,materialize-class-hierarchy-closure,materialize-individuals-vto" />

	<target name="materialize-for-fewer-classes" depends="normalize-uberon-merged,normalize-phenoscape-ext,normalize-pato,normalize-bspo,
		normalize-go,normalize-zfa,normalize-zfa-bridge,normalize-xao,normalize-xao-bridge,normalize-hpo,
		generate-involves-uberon-merged,generate-involves-phenoscape-ext,generate-involves-pato">
		<java classname="org.phenoscape.owl.MaterializeInferences" classpathref="jarsclasspath" fork="true" maxmemory="12g" failonerror="true">
			<arg value="${kb}/${phenoscape-tbox.encoded}" />
			<sysproperty key="org.phenoscape.owl.files" value="${kb}" />
			<sysproperty key="java.library.path" value="lib" />
			<sysproperty key="org.phenoscape.owl.reasoner" value="elk" />
			<sysproperty key="log4j.configuration" value="log4j.properties" />
		</java>
	</target>

	<target name="build-all-fewer-classes" description="" depends="download-ontologies,materialize-for-fewer-classes,zfin-expression-to-owl,zfin-phenotypes-to-owl,zfin-genes-to-owl,
		human-phenotypes-to-owl,mgi-genes-to-owl,mgi-expression-to-owl,
		xenbase-genes-to-owl,xenbase-expression-to-owl" />

</project>
